<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<script src="../js/jquery-1.7.2.js"></script>
<script src="../js/jquery.mousewheel.js"></script>
<link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="action.css" />
</head>
<body>
<div class="index_box">
  <div class="in_nr_box">
    <div class="park div1">
      <div class="green ">
        <div class="red ">
          <div class="pink ">
            <div class="white ">
              <div class="hours hourszhuan"></div>
              <div class="minutes minuteszhuan"></div>
              <div class="black"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="div1right ">
      	<ul>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>
      		<li><a href="#">范围范围范围范围发威发威发威发文发文</a></li>      		
      		
      	</ul>
      	
      	
      </div>
      
      
      
    </div>
    <div class="park div2"></div>
    <div class="park div3"></div>
    <div class="park div4"></div>
  </div>
</div>
<ul id="btn_ul">
  <li  class="cur">1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
</ul>
</body>
<script>
$(document).ready(function(e) {
     $(".park,.index_box").css({"height":$(window).height()})
	     window.divHeight=$(".park").height();	
	   $(window).resize(function(){
	   $(".park,.index_box").css({"height":$(window).height()})
	    window.divHeight=$(".park").height();
		var i=$("#btn_ul li.cur").index()
			marigntopFN(i,0)
			btnlistyle(i) 
		})

	
	   
$("#btn_ul li").click(function(){
	//$(this).addClass("cur")
	//$(this).siblings(this).removeClass("cur");
	var i=$(this).index();
	if(i==$("#btn_ul li.cur").index()){
	

	}
	
	marigntopFN(i,1000);
	btnlistyle(i);
	controlcss(i);
	})
 $(".in_nr_box").bind("mousewheel",function(event, delta) {	
            var dir = delta > 0 ? 'Up' : 'Down',
                vel = Math.abs(delta);
          timeoutId = $(this).data('timeoutId');
         if (timeoutId) {
              clearTimeout(timeoutId);
            }
        $(this).data('timeoutId', setTimeout(function() {
			 var i=$("#btn_ul li.cur").index()
			 if(dir=='Down'){
				 i++
				 if(i>=$("#btn_ul li").length-1){
					 i=$("#btn_ul li").length-1
					}	 
				 marigntopFN(i,1000) 
				 btnlistyle(i) 
				 }
			if(dir=='Up'){
				i--
				if(i<=0){
					i=0
					}	
				 marigntopFN(i,1000)
				 btnlistyle(i) 
				}	 
		 $(this).removeData('timeoutId');
            }, 1000));
         //return false;		
 })
 
 $("body").bind("keydown",function(event){
 	
 	  timeoutId = $(this).data('timeoutId');
         if (timeoutId) {
              clearTimeout(timeoutId);
            }
 	 $(this).data('timeoutId', setTimeout(function() {
 	 	
 	 var i=$("#btn_ul li.cur").index()
	  if(event.which==40 || event.which==34){
		i++
		 if(i>=$("#btn_ul li").length-1){
			 i=$("#btn_ul li").length-1
			}
		marigntopFN(i,1000)
		btnlistyle(i) 
		
		}	
		if(event.which==38 || event.which==33){
		i--
		if(i<=0){
			i=0
			}
		marigntopFN(i,1000)
		btnlistyle(i)   
		
		}	
 	 	
 	 $(this).removeData('timeoutId');
            }, 1000));
 	
 })
 

function marigntopFN(i,speed){//控制div marign-top的函数  i 这个形参为获取当前按钮获得激活样式的 index 值
	$(".in_nr_box").animate({"margin-top":-divHeight*i},speed);
	 $("#btn_ul li").eq(i).addClass("cur").siblings(this).removeClass("cur")
	}		
function btnlistyle(i){
	
	
	if(i==1){

	 $("#btn_ul li").hide(10).delay(1000).show(10).css({"background":"#000"})
	 $("#btn_ul li.cur").css({"background":"#ff0000"})
	}else
	  {
	  $("#btn_ul li").hide(10).delay(1000).show(10).css({"background":"#fff"})
	  
	  $("#btn_ul li.cur").css({"background":"#ff0000"})
	}
	
	
	
	
	
}
function addclassfn(elemet,classname,times){
	
	
		$(elemet).eq(times).removeClass(classname).hide(10).show(10).addClass(classname)
	
}
function  controlcss(i){
	
	var a=0
	switch(i){
		case 0:
		addclassfn(".div1 .green,.div1 pink","b_s_chang");
		addclassfn(".div1 .red,.div1 .white","s_b_chang");
		$(".div1right li").hide()
		setInterval(function(){
			
		addclassfn(".div1right li","rightIn",a);
		a++
		},500)
		break;
		
		
	}
	
	
	
}



		
});


</script>
</html>
